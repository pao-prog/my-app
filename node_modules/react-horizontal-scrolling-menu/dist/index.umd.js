!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["react-horizontal-scrolling-menu"]={},e.React)}(this,(function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=n(t);!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".react-horizontal-scrolling-menu--wrapper {\n  display: flex;\n}\n\n.react-horizontal-scrolling-menu--scroll-container {\n  display: flex;\n  height: max-content;\n  overflow-y: hidden;\n  position: relative;\n  width: 100%;\n}\n\n:export {\n  wrapper: react-horizontal-scrolling-menu--wrapper;\n  container: react-horizontal-scrolling-menu--scroll-container;\n}\n");const o="react-horizontal-scrolling-menu",i="-separator",l=`${o}--separator`,a=`${o}--item`,s=`${o}--scroll-container`,u=`${o}--wrapper`,d="itemId",c="data-key",f="data-index";var m=Object.freeze({__proto__:null,rootClassName:o,separatorString:i,separatorClassName:l,itemClassName:a,scrollContainerClassName:s,wrapperClassName:u,id:d,dataKeyAttribute:c,dataIndexAttribute:f});function v({className:e="",children:t,onScroll:n=(()=>{}),scrollRef:o}){const i=r.default.useMemo((()=>`${s} ${e}`),[e]);return r.default.createElement("div",{className:i,onScroll:n,ref:o},t)}var h=r.default.memo((function({className:e,id:t,index:n,refs:o}){const i=r.default.useRef(null);return o[n]=i,r.default.createElement("div",Object.assign({className:e},{[c]:t,[f]:n},{ref:i}))}));var p,g=r.default.memo((function({children:e,className:t,id:n,index:o,refs:i}){const l=r.default.useRef(null);return i[String(o)]=l,r.default.createElement("div",Object.assign({className:t},{[c]:n,[f]:o},{ref:l}),e)}));function b({children:e,itemClassName:t="",refs:n,separatorClassName:o=""}){const s=r.default.Children.toArray(e).filter(Boolean),u=s.length,c=r.default.useMemo((()=>`${a} ${t}`),[t]),f=r.default.useMemo((()=>`${l} ${o}`),[o]);return r.default.createElement(r.default.Fragment,null,s.map(((e,t)=>{var o,l;const a=null===(l=null===(o=e)||void 0===o?void 0:o.props)||void 0===l?void 0:l[d],s=a+i,m=t+1===u;return[r.default.createElement(g,{className:c,id:a,key:"menuItem__"+a,refs:n,index:t},e),!m&&r.default.createElement(h,{className:f,id:s,refs:n,key:s,index:t+.1})]})))}function y(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function x(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function w(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return x(n.overflowY,t)||x(n.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function I(e,t,n,r,o,i,l,a){return i<e&&l>t||i>e&&l<t?0:i<=e&&a<=n||l>=t&&a>=n?i-e-r:l>t&&a<n||i<e&&a>n?l-t+o:0}function C(e,t){var n=window,r=t.scrollMode,o=t.block,i=t.inline,l=t.boundary,a=t.skipOverflowHiddenElements,s="function"==typeof l?l:function(e){return e!==l};if(!y(e))throw new TypeError("Invalid target");for(var u=document.scrollingElement||document.documentElement,d=[],c=e;y(c)&&s(c);){if((c=c.parentElement)===u){d.push(c);break}null!=c&&c===document.body&&w(c)&&!w(document.documentElement)||null!=c&&w(c,a)&&d.push(c)}for(var f=n.visualViewport?n.visualViewport.width:innerWidth,m=n.visualViewport?n.visualViewport.height:innerHeight,v=window.scrollX||pageXOffset,h=window.scrollY||pageYOffset,p=e.getBoundingClientRect(),g=p.height,b=p.width,x=p.top,C=p.right,E=p.bottom,M=p.left,N="start"===o||"nearest"===o?x:"end"===o?E:x+g/2,S="center"===i?M+b/2:"end"===i?C:M,k=[],O=0;O<d.length;O++){var A=d[O],T=A.getBoundingClientRect(),W=T.height,j=T.width,R=T.top,V=T.right,$=T.bottom,B=T.left;if("if-needed"===r&&x>=0&&M>=0&&E<=m&&C<=f&&x>=R&&E<=$&&M>=B&&C<=V)return k;var L=getComputedStyle(A),H=parseInt(L.borderLeftWidth,10),P=parseInt(L.borderTopWidth,10),_=parseInt(L.borderRightWidth,10),z=parseInt(L.borderBottomWidth,10),D=0,X=0,Y="offsetWidth"in A?A.offsetWidth-A.clientWidth-H-_:0,q="offsetHeight"in A?A.offsetHeight-A.clientHeight-P-z:0;if(u===A)D="start"===o?N:"end"===o?N-m:"nearest"===o?I(h,h+m,m,P,z,h+N,h+N+g,g):N-m/2,X="start"===i?S:"center"===i?S-f/2:"end"===i?S-f:I(v,v+f,f,H,_,v+S,v+S+b,b),D=Math.max(0,D+h),X=Math.max(0,X+v);else{D="start"===o?N-R-P:"end"===o?N-$+z+q:"nearest"===o?I(R,$,W,P,z+q,N,N+g,g):N-(R+W/2)+q/2,X="start"===i?S-B-H:"center"===i?S-(B+j/2)+Y/2:"end"===i?S-V+_+Y:I(B,V,j,H,_+Y,S,S+b,b);var F=A.scrollLeft,J=A.scrollTop;N+=J-(D=Math.max(0,Math.min(J+D,A.scrollHeight-W+q))),S+=F-(X=Math.max(0,Math.min(F+X,A.scrollWidth-j+Y)))}k.push({el:A,top:D,left:X})}return k}function E(e){return e===Object(e)&&0!==Object.keys(e).length}function M(e,t){var n=!e.ownerDocument.documentElement.contains(e);if(E(t)&&"function"==typeof t.behavior)return t.behavior(n?[]:C(e,t));if(!n){var r=function(e){return!1===e?{block:"end",inline:"nearest"}:E(e)?e:{block:"start",inline:"nearest"}}(t);return function(e,t){void 0===t&&(t="auto");var n="scrollBehavior"in document.body.style;e.forEach((function(e){var r=e.el,o=e.top,i=e.left;r.scroll&&n?r.scroll({top:o,left:i,behavior:t}):(r.scrollTop=o,r.scrollLeft=i)}))}(C(e,r),r.behavior)}}var N=function(){return p||(p="performance"in window?performance.now.bind(performance):Date.now),p()};function S(e){var t=N(),n=Math.min((t-e.startTime)/e.duration,1),r=e.ease(n),o=e.startX+(e.x-e.startX)*r,i=e.startY+(e.y-e.startY)*r;e.method(o,i),o!==e.x||i!==e.y?requestAnimationFrame((function(){return S(e)})):e.cb()}function k(e,t,n,r,o,i){var l,a,s;void 0===r&&(r=600),void 0===o&&(o=function(e){return 1+--e*e*e*e*e}),l=e,a=e.scrollLeft,s=e.scrollTop,S({scrollable:l,method:function(t,n){e.scrollLeft=Math.ceil(t),e.scrollTop=Math.ceil(n)},startTime:N(),startX:a,startY:s,x:t,y:n,duration:r,ease:o,cb:i})}var O=function(e,t){var n=t||{};return function(e){return e&&!e.behavior||"smooth"===e.behavior}(n)?M(e,{block:n.block,inline:n.inline,scrollMode:n.scrollMode,boundary:n.boundary,behavior:function(e){return Promise.all(e.reduce((function(e,t){var r=t.el,o=t.left,i=t.top,l=r.scrollLeft,a=r.scrollTop;return l===o&&a===i?e:[].concat(e,[new Promise((function(e){return k(r,o,i,n.duration,n.ease,(function(){return e({el:r,left:[l,o],top:[a,i]})}))}))])}),[]))}}):Promise.resolve(M(e,t))};function A(e,t,n,r,o){var i,l;const a=(null===(l=null===(i=e)||void 0===i?void 0:i.entry)||void 0===l?void 0:l.target)||e,s=t||"smooth";return a&&O(a,Object.assign({behavior:s,inline:n||"end",block:r||"nearest",duration:500},o))}const T=e=>document.querySelector(`[data-key='${e}']`),W=e=>document.querySelector(`[data-index='${e}']`);function j(e){return r.default.isValidElement(e)&&e||"function"==typeof e&&r.default.createElement(e,null)||null}const R=e=>e.filter((e=>!new RegExp(".*-separator$").test(e)));function V({items:e,itemsChanged:t,refs:n,options:o}){const i=r.default.useRef(),[l,a]=r.default.useState([]),s=r.default.useRef(+setTimeout((()=>{}),0)),u=r.default.useCallback((t=>{e.set(function(e,t){return[...e].map((e=>{var n,r;const o=e.target,i=(null===(n=null==o?void 0:o.dataset)||void 0===n?void 0:n.key)||"";return[i,{index:String((null===(r=null==o?void 0:o.dataset)||void 0===r?void 0:r.index)||""),key:i,entry:e,visible:e.intersectionRatio>=t.ratio}]}))}(t,o)),global.clearTimeout(s.current),s.current=+setTimeout((()=>global.requestAnimationFrame((()=>{a((t=>{const n=e.getVisible().map((e=>e[1].key));return JSON.stringify(t)!==JSON.stringify(n)?n:t}))}))),o.throttle)}),[e,o]);return r.default.useLayoutEffect((()=>{const e=(e=>Object.values(e).map((e=>e.current)).filter(Boolean))(n),t=i.current||new IntersectionObserver(u,o);return i.current=t,e.forEach((e=>t.observe(e))),()=>{clearTimeout(s.current),t.disconnect(),i.current=void 0}}),[u,t,o,n]),{visibleItems:l}}function $(e,t){const[n,o]=r.default.useState(""),i=r.default.useMemo((()=>{return t=e,r.default.Children.toArray(t).map((e=>{var t,n;return null===(n=null===(t=e)||void 0===t?void 0:t.props)||void 0===n?void 0:n[d]})).filter(Boolean);var t}),[e]);return r.default.useEffect((()=>{const e=i.filter(Boolean).join("");t.toItemsWithoutSeparators().filter((e=>!i.includes(e))).forEach((e=>{var n,r;const o=(null===(n=t.last())||void 0===n?void 0:n.key)===e&&(null===(r=t.prev(e))||void 0===r?void 0:r.key)||"";t.delete(o),t.delete(`${e}-separator`),t.delete(e)})),o(e)}),[i,t]),n}class B extends Map{toArr(){return this.sort([...this])}toItems(){return this.toArr().map((([e])=>e))}toItemsWithoutSeparators(){return R(this.toItems())}toItemsKeys(){return this.toItems()}sort(e){return e.sort((([,e],[,t])=>+e.index-+t.index))}set(e,t){return Array.isArray(e)?this.sort(e).forEach((([e,t])=>{super.set(e,t)})):super.set(e,t),this}first(){var e;return null===(e=this.toArr()[0])||void 0===e?void 0:e[1]}last(){var e,t;return null===(t=null===(e=this.toArr().slice(-1))||void 0===e?void 0:e[0])||void 0===t?void 0:t[1]}filter(e){return this.toArr().filter(e)}find(e){return this.toArr().find(e)}findIndex(e){return this.toArr().findIndex(e)}prev(e){var t;const n=this.toArr(),r=n.findIndex((([t,n])=>t===e||n===e));return-1!==r?null===(t=n[r-1])||void 0===t?void 0:t[1]:void 0}next(e){var t;const n=this.toArr(),r=n.findIndex((([t,n])=>t===e||n===e));return-1!==r?null===(t=n[r+1])||void 0===t?void 0:t[1]:void 0}getVisible(){return this.filter((e=>e[1].visible))}}const L={ratio:.9,rootMargin:"5px",threshold:[.05,.5,.75,.95],throttle:100};const H=r.default.createContext({}),P=e=>e.reduce(((e,t)=>e.concat(t).concat(`${t}-separator`)),[]).slice(0,-1);e.ScrollMenu=function({LeftArrow:e,RightArrow:t,children:n,onInit:o=(()=>{}),onUpdate:i=(()=>{}),onMouseDown:l,onMouseUp:a,onMouseMove:s,onScroll:d=(()=>{}),onWheel:c=(()=>{}),options:f=L,scrollContainerClassName:m="",itemClassName:h="",separatorClassName:p="",wrapperClassName:g="",apiRef:y={current:{}}}){const x=j(e),w=j(t),I=r.default.useRef(null),[C]=r.default.useState({}),E=r.default.useMemo((()=>Object.assign(Object.assign(Object.assign({},L),f),{root:I.current})),[f,I.current]),M=r.default.useRef(new B).current,N=$(n,M),{visibleItems:S}=V({items:M,itemsChanged:N,options:E,refs:C}),k=!!S.length,O=r.default.useMemo((()=>function(e,t=[],n){var r,o;const i=R(t),l=!!(null===(r=e.first())||void 0===r?void 0:r.visible),a=!!(null===(o=e.last())||void 0===o?void 0:o.visible),s=t=>{var n;return null===(n=e.find((e=>e[1].key===String(t))))||void 0===n?void 0:n[1]},u=()=>{var t,n;return e.prev(null===(n=null===(t=e.getVisible())||void 0===t?void 0:t[0])||void 0===n?void 0:n[1])},d=()=>{var t,n,r,o;return e.next(null===(o=null===(r=null===(n=null===(t=e.getVisible())||void 0===t?void 0:t.slice)||void 0===n?void 0:n.call(t,-1))||void 0===r?void 0:r[0])||void 0===o?void 0:o[1])};return{getItemById:s,getItemElementById:T,getItemByIndex:t=>{var n;return null===(n=e.find((e=>String(e[1].index)===String(t))))||void 0===n?void 0:n[1]},getItemElementByIndex:W,getNextItem:d,getPrevItem:u,isFirstItemVisible:l,isItemVisible:e=>t.includes(e),isLastItem:t=>e.last()===s(t),isLastItemVisible:a,scrollNext:(e="smooth",t="start",r="nearest",{duration:o,ease:i,boundary:l=(null==n?void 0:n.current)}={})=>A(d(),e,t,r,{boundary:l,duration:o,ease:i}),scrollPrev:(e="smooth",t="end",r="nearest",{duration:o,ease:i,boundary:l=(null==n?void 0:n.current)}={})=>A(u(),e,t,r,{boundary:l,duration:o,ease:i}),scrollToItem:(e,t,r,o,i)=>A(e,t,r,o,Object.assign({boundary:null==n?void 0:n.current},i)),visibleItems:t,visibleItemsWithoutSeparators:i}}(M,S,I)),[M,S,N]),P=r.default.useCallback((()=>Object.assign(Object.assign({},O),{initComplete:k,items:M,visibleItems:S,scrollContainer:I})),[O,k,M,S,I]),[_,z]=r.default.useState(P);!function({cb:e=(()=>{}),condition:t,hash:n}){r.default.useEffect((()=>{t&&e()}),[n,t])}({cb:()=>i(_),condition:function({cb:e,condition:t}){const[n,o]=r.default.useState(!1);return r.default.useEffect((()=>{t&&!n&&(o(!0),e())}),[t,n]),n}({cb:()=>o(_),condition:k}),hash:JSON.stringify(S.concat(String(null==_?void 0:_.isFirstItemVisible)).concat(String(null==_?void 0:_.isLastItemVisible)))}),r.default.useEffect((()=>z(P())),[P]),y.current=_;const D=r.default.useCallback((e=>d(_,e)),[d,_]),X=r.default.useCallback((e=>c(_,e)),[c,_]),Y=r.default.useMemo((()=>`${u} ${g}`),[g]);return r.default.createElement("div",{className:Y,onWheel:X,onMouseDown:null==l?void 0:l(_),onMouseUp:null==a?void 0:a(_),onMouseMove:null==s?void 0:s(_)},r.default.createElement(H.Provider,{value:_},x,r.default.createElement(v,{className:m,onScroll:D,scrollRef:I},r.default.createElement(b,{refs:C,itemClassName:h,separatorClassName:p},n)),w))},e.VisibilityContext=H,e.constants=m,e.getItemsPos=e=>{var t;const n=(e=>e.filter(((e,t,n)=>{const r=0===t,o=t===n.length-1,l=new RegExp(i).test(e);return!((r||o)&&l)})))(e),r=n[Math.floor(n.length/2)];return{first:null==n?void 0:n[0],center:r,last:null===(t=n.slice(-1))||void 0===t?void 0:t[0]}},e.slidingWindow=function(e,t){const n=R(e),r=R(t);return{prev:()=>P(function(e,t){const n=e.findIndex((e=>e===(null==t?void 0:t[0]))),r=t.length,o=n-r,i=o<0,l=i?0:o,a=e.slice(l,i?r:n);return a.length===r?a:e.slice(n,r)}(n,r)),next:()=>P(function(e,t){const n=e.findIndex((e=>{var n;return e===(null===(n=t.slice(-1))||void 0===n?void 0:n[0])})),r=t.length,o=n+r+1,i=o>e.length-1,l=i?e.length-1:o,a=e.slice(i?l-r+1:n+1,l);return a.length===r?a:e.slice(e.length-r,e.length+r)}(n,r))}},Object.defineProperty(e,"__esModule",{value:!0})}));

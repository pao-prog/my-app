import e from"react";!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".react-horizontal-scrolling-menu--wrapper {\n  display: flex;\n}\n\n.react-horizontal-scrolling-menu--scroll-container {\n  display: flex;\n  height: max-content;\n  overflow-y: hidden;\n  position: relative;\n  width: 100%;\n}\n\n:export {\n  wrapper: react-horizontal-scrolling-menu--wrapper;\n  container: react-horizontal-scrolling-menu--scroll-container;\n}\n");const t="react-horizontal-scrolling-menu",n=`${t}--separator`,r=`${t}--item`,o=`${t}--scroll-container`,i=`${t}--wrapper`,l="itemId";var s=Object.freeze({__proto__:null,rootClassName:t,separatorString:"-separator",separatorClassName:n,itemClassName:r,scrollContainerClassName:o,wrapperClassName:i,id:l,dataKeyAttribute:"data-key",dataIndexAttribute:"data-index"});function a({className:t="",children:n,onScroll:r=(()=>{}),scrollRef:i}){const l=e.useMemo((()=>`${o} ${t}`),[t]);return e.createElement("div",{className:l,onScroll:r,ref:i},n)}var c=e.memo((function({className:t,id:n,index:r,refs:o}){const i=e.useRef(null);return o[r]=i,e.createElement("div",Object.assign({className:t},{"data-key":n,"data-index":r},{ref:i}))}));var u,d=e.memo((function({children:t,className:n,id:r,index:o,refs:i}){const l=e.useRef(null);return i[String(o)]=l,e.createElement("div",Object.assign({className:n},{"data-key":r,"data-index":o},{ref:l}),t)}));function f({children:t,itemClassName:o="",refs:i,separatorClassName:s=""}){const a=e.Children.toArray(t).filter(Boolean),u=a.length,f=e.useMemo((()=>`${r} ${o}`),[o]),m=e.useMemo((()=>`${n} ${s}`),[s]);return e.createElement(e.Fragment,null,a.map(((t,n)=>{var r,o;const s=null===(o=null===(r=t)||void 0===r?void 0:r.props)||void 0===o?void 0:o[l],a=s+"-separator",v=n+1===u;return[e.createElement(d,{className:f,id:s,key:"menuItem__"+s,refs:i,index:n},t),!v&&e.createElement(c,{className:m,id:a,refs:i,key:a,index:n+.1})]})))}function m(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function v(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function h(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return v(n.overflowY,t)||v(n.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function p(e,t,n,r,o,i,l,s){return i<e&&l>t||i>e&&l<t?0:i<=e&&s<=n||l>=t&&s>=n?i-e-r:l>t&&s<n||i<e&&s>n?l-t+o:0}function g(e,t){var n=window,r=t.scrollMode,o=t.block,i=t.inline,l=t.boundary,s=t.skipOverflowHiddenElements,a="function"==typeof l?l:function(e){return e!==l};if(!m(e))throw new TypeError("Invalid target");for(var c=document.scrollingElement||document.documentElement,u=[],d=e;m(d)&&a(d);){if((d=d.parentElement)===c){u.push(d);break}null!=d&&d===document.body&&h(d)&&!h(document.documentElement)||null!=d&&h(d,s)&&u.push(d)}for(var f=n.visualViewport?n.visualViewport.width:innerWidth,v=n.visualViewport?n.visualViewport.height:innerHeight,g=window.scrollX||pageXOffset,b=window.scrollY||pageYOffset,y=e.getBoundingClientRect(),x=y.height,w=y.width,I=y.top,E=y.right,C=y.bottom,M=y.left,N="start"===o||"nearest"===o?I:"end"===o?C:I+x/2,S="center"===i?M+w/2:"end"===i?E:M,k=[],A=0;A<u.length;A++){var O=u[A],T=O.getBoundingClientRect(),W=T.height,$=T.width,R=T.top,V=T.right,j=T.bottom,B=T.left;if("if-needed"===r&&I>=0&&M>=0&&C<=v&&E<=f&&I>=R&&C<=j&&M>=B&&E<=V)return k;var L=getComputedStyle(O),H=parseInt(L.borderLeftWidth,10),D=parseInt(L.borderTopWidth,10),z=parseInt(L.borderRightWidth,10),P=parseInt(L.borderBottomWidth,10),X=0,Y=0,_="offsetWidth"in O?O.offsetWidth-O.clientWidth-H-z:0,F="offsetHeight"in O?O.offsetHeight-O.clientHeight-D-P:0;if(c===O)X="start"===o?N:"end"===o?N-v:"nearest"===o?p(b,b+v,v,D,P,b+N,b+N+x,x):N-v/2,Y="start"===i?S:"center"===i?S-f/2:"end"===i?S-f:p(g,g+f,f,H,z,g+S,g+S+w,w),X=Math.max(0,X+b),Y=Math.max(0,Y+g);else{X="start"===o?N-R-D:"end"===o?N-j+P+F:"nearest"===o?p(R,j,W,D,P+F,N,N+x,x):N-(R+W/2)+F/2,Y="start"===i?S-B-H:"center"===i?S-(B+$/2)+_/2:"end"===i?S-V+z+_:p(B,V,$,H,z+_,S,S+w,w);var q=O.scrollLeft,J=O.scrollTop;N+=J-(X=Math.max(0,Math.min(J+X,O.scrollHeight-W+F))),S+=q-(Y=Math.max(0,Math.min(q+Y,O.scrollWidth-$+_)))}k.push({el:O,top:X,left:Y})}return k}function b(e){return e===Object(e)&&0!==Object.keys(e).length}function y(e,t){var n=!e.ownerDocument.documentElement.contains(e);if(b(t)&&"function"==typeof t.behavior)return t.behavior(n?[]:g(e,t));if(!n){var r=function(e){return!1===e?{block:"end",inline:"nearest"}:b(e)?e:{block:"start",inline:"nearest"}}(t);return function(e,t){void 0===t&&(t="auto");var n="scrollBehavior"in document.body.style;e.forEach((function(e){var r=e.el,o=e.top,i=e.left;r.scroll&&n?r.scroll({top:o,left:i,behavior:t}):(r.scrollTop=o,r.scrollLeft=i)}))}(g(e,r),r.behavior)}}var x=function(){return u||(u="performance"in window?performance.now.bind(performance):Date.now),u()};function w(e){var t=x(),n=Math.min((t-e.startTime)/e.duration,1),r=e.ease(n),o=e.startX+(e.x-e.startX)*r,i=e.startY+(e.y-e.startY)*r;e.method(o,i),o!==e.x||i!==e.y?requestAnimationFrame((function(){return w(e)})):e.cb()}function I(e,t,n,r,o,i){var l,s,a;void 0===r&&(r=600),void 0===o&&(o=function(e){return 1+--e*e*e*e*e}),l=e,s=e.scrollLeft,a=e.scrollTop,w({scrollable:l,method:function(t,n){e.scrollLeft=Math.ceil(t),e.scrollTop=Math.ceil(n)},startTime:x(),startX:s,startY:a,x:t,y:n,duration:r,ease:o,cb:i})}var E=function(e,t){var n=t||{};return function(e){return e&&!e.behavior||"smooth"===e.behavior}(n)?y(e,{block:n.block,inline:n.inline,scrollMode:n.scrollMode,boundary:n.boundary,behavior:function(e){return Promise.all(e.reduce((function(e,t){var r=t.el,o=t.left,i=t.top,l=r.scrollLeft,s=r.scrollTop;return l===o&&s===i?e:[].concat(e,[new Promise((function(e){return I(r,o,i,n.duration,n.ease,(function(){return e({el:r,left:[l,o],top:[s,i]})}))}))])}),[]))}}):Promise.resolve(y(e,t))};function C(e,t,n,r,o){var i,l;const s=(null===(l=null===(i=e)||void 0===i?void 0:i.entry)||void 0===l?void 0:l.target)||e,a=t||"smooth";return s&&E(s,Object.assign({behavior:a,inline:n||"end",block:r||"nearest",duration:500},o))}const M=e=>document.querySelector(`[data-key='${e}']`),N=e=>document.querySelector(`[data-index='${e}']`);function S(t){return e.isValidElement(t)&&t||"function"==typeof t&&e.createElement(t,null)||null}const k=e=>e.filter((e=>!new RegExp(".*-separator$").test(e)));function A({items:t,itemsChanged:n,refs:r,options:o}){const i=e.useRef(),[l,s]=e.useState([]),a=e.useRef(+setTimeout((()=>{}),0)),c=e.useCallback((e=>{t.set(function(e,t){return[...e].map((e=>{var n,r;const o=e.target,i=(null===(n=null==o?void 0:o.dataset)||void 0===n?void 0:n.key)||"";return[i,{index:String((null===(r=null==o?void 0:o.dataset)||void 0===r?void 0:r.index)||""),key:i,entry:e,visible:e.intersectionRatio>=t.ratio}]}))}(e,o)),global.clearTimeout(a.current),a.current=+setTimeout((()=>global.requestAnimationFrame((()=>{s((e=>{const n=t.getVisible().map((e=>e[1].key));return JSON.stringify(e)!==JSON.stringify(n)?n:e}))}))),o.throttle)}),[t,o]);return e.useLayoutEffect((()=>{const e=(e=>Object.values(e).map((e=>e.current)).filter(Boolean))(r),t=i.current||new IntersectionObserver(c,o);return i.current=t,e.forEach((e=>t.observe(e))),()=>{clearTimeout(a.current),t.disconnect(),i.current=void 0}}),[c,n,o,r]),{visibleItems:l}}function O(t,n){const[r,o]=e.useState(""),i=e.useMemo((()=>{return n=t,e.Children.toArray(n).map((e=>{var t,n;return null===(n=null===(t=e)||void 0===t?void 0:t.props)||void 0===n?void 0:n[l]})).filter(Boolean);var n}),[t]);return e.useEffect((()=>{const e=i.filter(Boolean).join("");n.toItemsWithoutSeparators().filter((e=>!i.includes(e))).forEach((e=>{var t,r;const o=(null===(t=n.last())||void 0===t?void 0:t.key)===e&&(null===(r=n.prev(e))||void 0===r?void 0:r.key)||"";n.delete(o),n.delete(`${e}-separator`),n.delete(e)})),o(e)}),[i,n]),r}class T extends Map{toArr(){return this.sort([...this])}toItems(){return this.toArr().map((([e])=>e))}toItemsWithoutSeparators(){return k(this.toItems())}toItemsKeys(){return this.toItems()}sort(e){return e.sort((([,e],[,t])=>+e.index-+t.index))}set(e,t){return Array.isArray(e)?this.sort(e).forEach((([e,t])=>{super.set(e,t)})):super.set(e,t),this}first(){var e;return null===(e=this.toArr()[0])||void 0===e?void 0:e[1]}last(){var e,t;return null===(t=null===(e=this.toArr().slice(-1))||void 0===e?void 0:e[0])||void 0===t?void 0:t[1]}filter(e){return this.toArr().filter(e)}find(e){return this.toArr().find(e)}findIndex(e){return this.toArr().findIndex(e)}prev(e){var t;const n=this.toArr(),r=n.findIndex((([t,n])=>t===e||n===e));return-1!==r?null===(t=n[r-1])||void 0===t?void 0:t[1]:void 0}next(e){var t;const n=this.toArr(),r=n.findIndex((([t,n])=>t===e||n===e));return-1!==r?null===(t=n[r+1])||void 0===t?void 0:t[1]:void 0}getVisible(){return this.filter((e=>e[1].visible))}}const W={ratio:.9,rootMargin:"5px",threshold:[.05,.5,.75,.95],throttle:100};const $=e.createContext({}),R=e=>e.reduce(((e,t)=>e.concat(t).concat(`${t}-separator`)),[]).slice(0,-1);function V(e,t){const n=k(e),r=k(t);return{prev:()=>R(function(e,t){const n=e.findIndex((e=>e===(null==t?void 0:t[0]))),r=t.length,o=n-r,i=o<0,l=i?0:o,s=e.slice(l,i?r:n);return s.length===r?s:e.slice(n,r)}(n,r)),next:()=>R(function(e,t){const n=e.findIndex((e=>{var n;return e===(null===(n=t.slice(-1))||void 0===n?void 0:n[0])})),r=t.length,o=n+r+1,i=o>e.length-1,l=i?e.length-1:o,s=e.slice(i?l-r+1:n+1,l);return s.length===r?s:e.slice(e.length-r,e.length+r)}(n,r))}}const j=e=>{var t;const n=(e=>e.filter(((e,t,n)=>{const r=0===t,o=t===n.length-1,i=new RegExp("-separator").test(e);return!((r||o)&&i)})))(e),r=n[Math.floor(n.length/2)];return{first:null==n?void 0:n[0],center:r,last:null===(t=n.slice(-1))||void 0===t?void 0:t[0]}};function B({LeftArrow:t,RightArrow:n,children:r,onInit:o=(()=>{}),onUpdate:l=(()=>{}),onMouseDown:s,onMouseUp:c,onMouseMove:u,onScroll:d=(()=>{}),onWheel:m=(()=>{}),options:v=W,scrollContainerClassName:h="",itemClassName:p="",separatorClassName:g="",wrapperClassName:b="",apiRef:y={current:{}}}){const x=S(t),w=S(n),I=e.useRef(null),[E]=e.useState({}),R=e.useMemo((()=>Object.assign(Object.assign(Object.assign({},W),v),{root:I.current})),[v,I.current]),V=e.useRef(new T).current,j=O(r,V),{visibleItems:B}=A({items:V,itemsChanged:j,options:R,refs:E}),L=!!B.length,H=e.useMemo((()=>function(e,t=[],n){var r,o;const i=k(t),l=!!(null===(r=e.first())||void 0===r?void 0:r.visible),s=!!(null===(o=e.last())||void 0===o?void 0:o.visible),a=t=>{var n;return null===(n=e.find((e=>e[1].key===String(t))))||void 0===n?void 0:n[1]},c=()=>{var t,n;return e.prev(null===(n=null===(t=e.getVisible())||void 0===t?void 0:t[0])||void 0===n?void 0:n[1])},u=()=>{var t,n,r,o;return e.next(null===(o=null===(r=null===(n=null===(t=e.getVisible())||void 0===t?void 0:t.slice)||void 0===n?void 0:n.call(t,-1))||void 0===r?void 0:r[0])||void 0===o?void 0:o[1])};return{getItemById:a,getItemElementById:M,getItemByIndex:t=>{var n;return null===(n=e.find((e=>String(e[1].index)===String(t))))||void 0===n?void 0:n[1]},getItemElementByIndex:N,getNextItem:u,getPrevItem:c,isFirstItemVisible:l,isItemVisible:e=>t.includes(e),isLastItem:t=>e.last()===a(t),isLastItemVisible:s,scrollNext:(e="smooth",t="start",r="nearest",{duration:o,ease:i,boundary:l=(null==n?void 0:n.current)}={})=>C(u(),e,t,r,{boundary:l,duration:o,ease:i}),scrollPrev:(e="smooth",t="end",r="nearest",{duration:o,ease:i,boundary:l=(null==n?void 0:n.current)}={})=>C(c(),e,t,r,{boundary:l,duration:o,ease:i}),scrollToItem:(e,t,r,o,i)=>C(e,t,r,o,Object.assign({boundary:null==n?void 0:n.current},i)),visibleItems:t,visibleItemsWithoutSeparators:i}}(V,B,I)),[V,B,j]),D=e.useCallback((()=>Object.assign(Object.assign({},H),{initComplete:L,items:V,visibleItems:B,scrollContainer:I})),[H,L,V,B,I]),[z,P]=e.useState(D);!function({cb:t=(()=>{}),condition:n,hash:r}){e.useEffect((()=>{n&&t()}),[r,n])}({cb:()=>l(z),condition:function({cb:t,condition:n}){const[r,o]=e.useState(!1);return e.useEffect((()=>{n&&!r&&(o(!0),t())}),[n,r]),r}({cb:()=>o(z),condition:L}),hash:JSON.stringify(B.concat(String(null==z?void 0:z.isFirstItemVisible)).concat(String(null==z?void 0:z.isLastItemVisible)))}),e.useEffect((()=>P(D())),[D]),y.current=z;const X=e.useCallback((e=>d(z,e)),[d,z]),Y=e.useCallback((e=>m(z,e)),[m,z]),_=e.useMemo((()=>`${i} ${b}`),[b]);return e.createElement("div",{className:_,onWheel:Y,onMouseDown:null==s?void 0:s(z),onMouseUp:null==c?void 0:c(z),onMouseMove:null==u?void 0:u(z)},e.createElement($.Provider,{value:z},x,e.createElement(a,{className:h,onScroll:X,scrollRef:I},e.createElement(f,{refs:E,itemClassName:p,separatorClassName:g},r)),w))}export{B as ScrollMenu,$ as VisibilityContext,s as constants,j as getItemsPos,V as slidingWindow};
